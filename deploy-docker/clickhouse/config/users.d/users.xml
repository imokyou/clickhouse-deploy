<clickhouse>
    <users>
        <!-- Remove default user -->
        <default remove="remove">
        </default>

        <!-- 重新定义默认用户 -->
        <default>
            <profile>default</profile>
            <networks>
                <ip>::/0</ip>
            </networks>
            <password><![CDATA[clickhouse123]]></password>
            <quota>default</quota>
            <access_management>1</access_management>
        </default>

        <!-- 管理员用户 - 拥有所有权限 -->
        <admin>
            <!-- 暂时使用明文密码进行测试 -->
            <password>xnJ8_M2zd7R!uQXaVgQDbTYn</password>
            <networks>
                <!-- 限制管理员只能从本地和内部网络访问 -->
                <ip>127.0.0.1</ip>
                <ip>10.0.0.0/8</ip>
                <ip>172.16.0.0/12</ip>
                <ip>192.168.0.0/16</ip>
            </networks>
            <!-- 使用默认配置文件 -->
            <profile>default</profile>
            <!-- 启用访问管理 -->
            <access_management>1</access_management>
        </admin>

        <!-- 普通Web用户 - 只有基本权限 -->
        <webuser>
            <!-- 暂时使用明文密码进行测试 -->
            <password>w2E8_B43wzP!gS53c56Lz0g6</password>
            <networks>
                <!-- 允许从任何网络访问，生产环境中应该限制 -->
                <ip>::/0</ip>
            </networks>
            <!-- 使用默认配置文件 -->
            <profile>default</profile>
            <!-- 启用访问管理 -->
            <access_management>0</access_management>
        </webuser>
        
        <demouser>
            <password>l0K3_L12g5F!pX83c45Jz1h7</password>
            <networks>
                <ip>::/0</ip>
            </networks>
            <profile>default</profile>
            <access_management>0</access_management>
            <readonly>1</readonly>
            <default_database>demo</default_database>
            <max_memory_usage_for_user_for_all_queries>12884901888</max_memory_usage_for_user_for_all_queries>
        </demouser>
    </users>
    
    <profiles>
        <default>
            <max_threads>4</max_threads>
            <max_insert_threads>4</max_insert_threads>
            <max_memory_usage>12884901888</max_memory_usage>
            <max_memory_usage_for_user>12884901888</max_memory_usage_for_user>
            <max_memory_usage_for_all_queries>12884901888</max_memory_usage_for_all_queries>
            
            <!-- Timeouts --> 
            <connect_timeout>10</connect_timeout>
            <receive_timeout>300</receive_timeout>
            <send_timeout>300</send_timeout>

            <!-- Async inserts -->
            <async_insert>1</async_insert>
            <async_insert_threads>4</async_insert_threads>
        </default>
    </profiles>
</clickhouse>